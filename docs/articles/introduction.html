<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>dtmapi documentation • dtmapi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="dtmapi documentation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dtmapi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/introduction.html">Home</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Displacement-Tracking-Matrix/dtmapi-R/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>dtmapi documentation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Displacement-Tracking-Matrix/dtmapi-R/blob/HEAD/vignettes/introduction.Rmd" class="external-link"><code>vignettes/introduction.Rmd</code></a></small>
      <div class="d-none name"><code>introduction.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>dtmapi</code> package provides functions to interact with
the Displacement Tracking Matrix (DTM) API. This vignette demonstrates
how to use the package’s functions to fetch data from the API. The
functions covered include:</p>
<ul>
<li><p><code><a href="../reference/get_all_countries.html">get_all_countries()</a></code></p></li>
<li><p><code><a href="../reference/get_all_operations.html">get_all_operations()</a></code></p></li>
<li><p><code><a href="../reference/get_idp_admin0_data.html">get_idp_admin0_data()</a></code></p></li>
<li><p><code><a href="../reference/get_idp_admin1_data.html">get_idp_admin1_data()</a></code></p></li>
<li><p><code><a href="../reference/get_idp_admin2_data.html">get_idp_admin2_data()</a></code></p></li>
</ul>
</div>
<div class="section level2">
<h2 id="install-package">Install Package<a class="anchor" aria-label="anchor" href="#install-package"></a>
</h2>
<p>While waiting for the <code>dtmapi</code> package to be approved on
CRAN, you can install it from GitHub :</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"Displacement-Tracking-Matrix/dtmapi-R"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="load-package">Load Package<a class="anchor" aria-label="anchor" href="#load-package"></a>
</h2>
<p>After installation, load the package using library():</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Displacement-Tracking-Matrix/dtmapi-R" class="external-link">dtmapi</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-all-countries">Get All Countries<a class="anchor" aria-label="anchor" href="#get-all-countries"></a>
</h2>
<p>The <code><a href="../reference/get_all_countries.html">get_all_countries()</a></code> function retrieves a list of all
countries from the DTM API.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch all countries</span></span>
<span><span class="va">countries_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_all_countries.html">get_all_countries</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the first few rows of the data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">countries_df</span><span class="op">)</span></span>
<span><span class="co">#&gt;                         admin0Name admin0Pcode</span></span>
<span><span class="co">#&gt; 1                      Afghanistan         AFG</span></span>
<span><span class="co">#&gt; 2              Antigua and Barbuda         ATG</span></span>
<span><span class="co">#&gt; 3                    Bahamas (the)         BHS</span></span>
<span><span class="co">#&gt; 4 Bolivia (Plurinational State of)         BOL</span></span>
<span><span class="co">#&gt; 5                     Burkina Faso         BFA</span></span>
<span><span class="co">#&gt; 6                          Burundi         BDI</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-all-operations">Get All Operations<a class="anchor" aria-label="anchor" href="#get-all-operations"></a>
</h2>
<p>The <code><a href="../reference/get_all_operations.html">get_all_operations()</a></code> function retrieves a list of
all operations from the DTM API.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch all operations</span></span>
<span><span class="va">operations_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_all_operations.html">get_all_operations</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the first few rows of the data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">operations_df</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                   operation operationStatus          admin0Name</span></span>
<span><span class="co">#&gt; 1                           Aceh earthquake        Inactive           Indonesia</span></span>
<span><span class="co">#&gt; 2                    Armed Clashes in Sudan          Active               Sudan</span></span>
<span><span class="co">#&gt; 3          Armed Clashes in Sudan (Monthly)          Active               Sudan</span></span>
<span><span class="co">#&gt; 4         Armed Clashes in Sudan (Overview)          Active               Sudan</span></span>
<span><span class="co">#&gt; 5                       Arrivals in Armenia          Active Republic of Armenia</span></span>
<span><span class="co">#&gt; 6 Bahamas (the) - Hurricane Dorian Response        Inactive       Bahamas (the)</span></span>
<span><span class="co">#&gt;   admin0Pcode</span></span>
<span><span class="co">#&gt; 1         IDN</span></span>
<span><span class="co">#&gt; 2         SDN</span></span>
<span><span class="co">#&gt; 3         SDN</span></span>
<span><span class="co">#&gt; 4         SDN</span></span>
<span><span class="co">#&gt; 5         ARM</span></span>
<span><span class="co">#&gt; 6         BHS</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-idp-data-at-admin-level-0">Get IDP Data at Admin Level 0<a class="anchor" aria-label="anchor" href="#get-idp-data-at-admin-level-0"></a>
</h2>
<p>The <code><a href="../reference/get_idp_admin0_data.html">get_idp_admin0_data()</a></code> function retrieves Internally
Displaced Persons (IDP) data aggregated at the country level.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch IDP data at Admin Level 0</span></span>
<span><span class="va">idp_admin0_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_idp_admin0_data.html">get_idp_admin0_data</a></span><span class="op">(</span>CountryName<span class="op">=</span><span class="st">'Ethiopia'</span>, FromRoundNumber<span class="op">=</span><span class="fl">1</span>, ToRoundNumber<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the first few rows of the data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">idp_admin0_df</span><span class="op">)</span></span>
<span><span class="co">#&gt;    id                                     operation admin0Name admin0Pcode</span></span>
<span><span class="co">#&gt; 1 824                        Countrywide monitoring   Ethiopia         ETH</span></span>
<span><span class="co">#&gt; 2 148                        Countrywide monitoring   Ethiopia         ETH</span></span>
<span><span class="co">#&gt; 3 834                        Countrywide monitoring   Ethiopia         ETH</span></span>
<span><span class="co">#&gt; 4 869 Ethiopia - Gedeo and West Guji Rapid Response   Ethiopia         ETH</span></span>
<span><span class="co">#&gt; 5 293                      Northern Ethiopia Crisis   Ethiopia         ETH</span></span>
<span><span class="co">#&gt; 6 300                      Northern Ethiopia Crisis   Ethiopia         ETH</span></span>
<span><span class="co">#&gt;   numPresentIdpInd       reportingDate yearReportingDate monthReportingDate</span></span>
<span><span class="co">#&gt; 1          1696145 2017-12-31T00:00:00              2017                 12</span></span>
<span><span class="co">#&gt; 2          1742461 2018-02-28T00:00:00              2018                  2</span></span>
<span><span class="co">#&gt; 3          1613436 2018-04-30T00:00:00              2018                  4</span></span>
<span><span class="co">#&gt; 4           359113 2018-07-30T00:00:00              2018                  7</span></span>
<span><span class="co">#&gt; 5           131590 2021-01-31T00:00:00              2021                  1</span></span>
<span><span class="co">#&gt; 6           378392 2021-02-28T00:00:00              2021                  2</span></span>
<span><span class="co">#&gt;   roundNumber assessmentType</span></span>
<span><span class="co">#&gt; 1           8             SA</span></span>
<span><span class="co">#&gt; 2           9             SA</span></span>
<span><span class="co">#&gt; 3          10             SA</span></span>
<span><span class="co">#&gt; 4           1             SA</span></span>
<span><span class="co">#&gt; 5           2             SA</span></span>
<span><span class="co">#&gt; 6           3             SA</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-idp-data-at-admin-level-1">Get IDP Data at Admin Level 1<a class="anchor" aria-label="anchor" href="#get-idp-data-at-admin-level-1"></a>
</h2>
<p>The get_idp_admin1_data() function retrieves IDP data aggregated at
Admin Level 1.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch IDP data at Admin Level 1</span></span>
<span><span class="va">admin1_data_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_idp_admin1_data.html">get_idp_admin1_data</a></span><span class="op">(</span>CountryName<span class="op">=</span><span class="st">'Sudan'</span>, Admin1Name<span class="op">=</span><span class="st">"Blue Nile"</span>, FromReportingDate<span class="op">=</span><span class="st">'2020-01-01'</span>, ToReportingDate<span class="op">=</span><span class="st">'2024-08-15'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the first few rows of the data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">admin1_data_df</span><span class="op">)</span></span>
<span><span class="co">#&gt;     id              operation admin0Name admin0Pcode admin1Name admin1Pcode</span></span>
<span><span class="co">#&gt; 1 1663        Darfur conflict      Sudan         SDN  Blue Nile        SD08</span></span>
<span><span class="co">#&gt; 2 1664        Darfur conflict      Sudan         SDN  Blue Nile        SD08</span></span>
<span><span class="co">#&gt; 3 1665        Darfur conflict      Sudan         SDN  Blue Nile        SD08</span></span>
<span><span class="co">#&gt; 4 1666        Darfur conflict      Sudan         SDN  Blue Nile        SD08</span></span>
<span><span class="co">#&gt; 5 6290 Armed Clashes in Sudan      Sudan         SDN  Blue Nile        SD08</span></span>
<span><span class="co">#&gt; 6 6291 Armed Clashes in Sudan      Sudan         SDN  Blue Nile        SD08</span></span>
<span><span class="co">#&gt;   numPresentIdpInd       reportingDate yearReportingDate monthReportingDate</span></span>
<span><span class="co">#&gt; 1            81693 2021-03-30T00:00:00              2021                  3</span></span>
<span><span class="co">#&gt; 2           130958 2021-12-31T00:00:00              2021                 12</span></span>
<span><span class="co">#&gt; 3           151156 2022-01-31T00:00:00              2022                  1</span></span>
<span><span class="co">#&gt; 4           152656 2022-03-30T00:00:00              2022                  3</span></span>
<span><span class="co">#&gt; 5              260 2023-04-28T00:00:00              2023                  4</span></span>
<span><span class="co">#&gt; 6              715 2023-05-07T00:00:00              2023                  5</span></span>
<span><span class="co">#&gt;   roundNumber assessmentType</span></span>
<span><span class="co">#&gt; 1           2             BA</span></span>
<span><span class="co">#&gt; 2           3             BA</span></span>
<span><span class="co">#&gt; 3           4             BA</span></span>
<span><span class="co">#&gt; 4           5             BA</span></span>
<span><span class="co">#&gt; 5           2             BA</span></span>
<span><span class="co">#&gt; 6           3             BA</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-idp-data-at-admin-level-2">Get IDP Data at Admin Level 2<a class="anchor" aria-label="anchor" href="#get-idp-data-at-admin-level-2"></a>
</h2>
<p>The get_idp_admin2_data() function retrieves IDP data aggregated at
Admin Level 2</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch IDP data at Admin Level 2</span></span>
<span><span class="va">admin2_data_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_idp_admin2_data.html">get_idp_admin2_data</a></span><span class="op">(</span>Operation<span class="op">=</span><span class="st">"Displacement due to conflict"</span>, CountryName<span class="op">=</span><span class="st">'Lebanon'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the first few rows of the data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">admin2_data_df</span><span class="op">)</span></span>
<span><span class="co">#&gt;      id                    operation admin0Name admin0Pcode        admin1Name</span></span>
<span><span class="co">#&gt; 1 48424 Displacement due to conflict    Lebanon         LBN Baalbek-El Hermel</span></span>
<span><span class="co">#&gt; 2 48425 Displacement due to conflict    Lebanon         LBN Baalbek-El Hermel</span></span>
<span><span class="co">#&gt; 3 48486 Displacement due to conflict    Lebanon         LBN            Beirut</span></span>
<span><span class="co">#&gt; 4 48487 Displacement due to conflict    Lebanon         LBN            Beirut</span></span>
<span><span class="co">#&gt; 5 48488 Displacement due to conflict    Lebanon         LBN            Beirut</span></span>
<span><span class="co">#&gt; 6 48455 Displacement due to conflict    Lebanon         LBN Baalbek-El Hermel</span></span>
<span><span class="co">#&gt;   admin1Pcode admin2Name admin2Pcode numPresentIdpInd       reportingDate</span></span>
<span><span class="co">#&gt; 1         LB8    Baalbek        LB21               18 2023-10-15T00:00:00</span></span>
<span><span class="co">#&gt; 2         LB8    Baalbek        LB21              903 2023-10-15T00:00:00</span></span>
<span><span class="co">#&gt; 3         LB1     Baabda        LB32               10 2023-10-15T00:00:00</span></span>
<span><span class="co">#&gt; 4         LB1     Beirut        LB11             1854 2023-10-15T00:00:00</span></span>
<span><span class="co">#&gt; 5         LB1     Beirut        LB11             1758 2023-10-15T00:00:00</span></span>
<span><span class="co">#&gt; 6         LB8  El Hermel        LB22               45 2023-10-15T00:00:00</span></span>
<span><span class="co">#&gt;   yearReportingDate monthReportingDate roundNumber assessmentType</span></span>
<span><span class="co">#&gt; 1              2023                 10           1             BA</span></span>
<span><span class="co">#&gt; 2              2023                 10           2             BA</span></span>
<span><span class="co">#&gt; 3              2023                 10           1             BA</span></span>
<span><span class="co">#&gt; 4              2023                 10           1             BA</span></span>
<span><span class="co">#&gt; 5              2023                 10           2             BA</span></span>
<span><span class="co">#&gt; 6              2023                 10           1             BA</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="function-arguments">Function Arguments<a class="anchor" aria-label="anchor" href="#function-arguments"></a>
</h2>
<p>Here are the descriptions for the arguments used in the functions of
the <code>dtmapi</code> package to get IDP data. At least one of the
following parameters must be provided: Operation, CountryName, or
Admin0Pcode.</p>
<div class="section level3">
<h3 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a>
</h3>
<ul>
<li><p><strong>Operation</strong>: Optional; Name of the DTM operation
for which the data was collected.</p></li>
<li><p><strong>CountryName</strong>: Optional; Name of the country where
the data was collected.</p></li>
<li><p><strong>Admin0Pcode</strong>: Optional; Country code (ISO 3166-1
alpha-3).</p></li>
<li><p><strong>Admin1Name</strong>: Optional; Name of level 1
administrative boundaries.</p></li>
<li><p><strong>Admin1Pcode</strong>: Optional; Place code of level 1
administrative boundaries.</p></li>
<li><p><strong>Admin2Name</strong>: Optional; Name of level 2
administrative boundaries.</p></li>
<li><p><strong>Admin2Pcode</strong>: Optional; Place code of level 2
administrative boundaries.</p></li>
<li><p><strong>FromReportingDate</strong>: Optional; Start date for the
reporting period (format: ‘YYYY-MM-DD’).</p></li>
<li><p><strong>ToReportingDate</strong>: Optional; End date for the
reporting period (format: ‘YYYY-MM-DD’).</p></li>
<li><p><strong>FromRoundNumber</strong>: Optional; Starting round number
for the data collection range.</p></li>
<li><p><strong>ToRoundNumber</strong>: Optional; Ending round number for
the data collection range.</p></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Luong Bang Tran.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
